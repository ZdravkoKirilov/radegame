<ng-container *ngIf="connectedEntities$ | async as connectedEntities">
    <rg-editor-layout>
        <rg-entity-view [formDefinition]="formDefinition" [items]="items$ | async" [showEditor]="showEditor$ | async"
            [selectedItem]="selectedItem$ | async" [connectedEntities]="connectedEntities" [template]="template"
            (toggleEditor)="toggleEditor($event)" (saveItem)="saveItem($event)" (editItem)="editItem($event)"
            (removeItem)="removeItem($event)">
        </rg-entity-view>
    </rg-editor-layout>

    <ng-template #template let-item>
        <mat-card>
            <mat-card-header>
                <mat-card-title>{{item.name}}</mat-card-title>
                <img *ngIf="item.image" mat-card-avatar [src]="item.image | serveImage:connectedEntities.images" />
            </mat-card-header>
            <mat-card-content>

                <p>{{item.description}}</p>
                <a mat-button [routerLink]="[item.id, 'stage']">Edit stage</a>
                <a mat-button [routerLink]="[item.id, 'live-test']">Live test</a>
            </mat-card-content>

            <mat-card-actions>
                <button mat-button (click)="removeItem(item)">Remove</button>
                <button mat-button (click)="editItem(item)">Edit</button>
            </mat-card-actions>

        </mat-card>
    </ng-template>
</ng-container>